// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Daycare {
  id        String   @id @default(cuid())
  name      String
  plan      String
  address   String?
  status    DaycareStatus @default(PENDING)
  users     User[]
  children  Child[]
  staff     Staff[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum DaycareStatus {
  PENDING
  ACTIVE
  INACTIVE
  ARCHIVED
}

model User {
  id            String    @id @default(cuid())
  name          String
  email         String    @unique
  emailVerified DateTime?
  password      String
  daycare       Daycare   @relation(fields: [daycareId], references: [id], onDelete: Cascade)
  daycareId     String
}

model VerificationToken {
  id      String   @id @default(cuid())
  email   String
  token   String   @unique
  expires DateTime

  @@unique([email, token])
}

model Child {
  id                       String      @id @default(cuid())
  name                     String
  dateOfBirth              DateTime
  startDate                DateTime
  status                   ChildStatus @default(Active)
  program                  String
  programType              String
  gender                   String?
  photoUrl                 String?
  photoHint                String?
  motherName               String
  motherEmail              String?
  fatherName               String
  fatherEmail              String?
  mobilePhone              String
  address                  String
  emergencyName            String
  emergencyPhone           String
  vaccination              String?
  allergies                String?
  notes                    String?
  daycare                  Daycare     @relation(fields: [daycareId], references: [id], onDelete: Cascade)
  daycareId                String
  createdAt                DateTime    @default(now())
  updatedAt                DateTime    @updatedAt
}

enum ChildStatus {
  Active
  Waitlisted
  Inactive
}

model Staff {
  id             String   @id @default(cuid())
  name           String
  role           String
  status         String
  startDate      DateTime
  phone          String
  address        String
  emergencyName  String
  emergencyPhone String
  payType        String
  payRate        Float
  certifications String?
  notes          String?
  photoUrl       String?
  photoHint      String?
  daycare        Daycare  @relation(fields: [daycareId], references: [id], onDelete: Cascade)
  daycareId      String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
