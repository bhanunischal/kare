// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Daycare {
  id        String        @id @default(cuid())
  name      String
  status    DaycareStatus @default(PENDING)
  plan      String
  address   String?
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  users     User[]
  children  Child[]
  staff     Staff[]
}

enum DaycareStatus {
  PENDING
  ACTIVE
  INACTIVE
  ARCHIVED
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  password      String
  daycare       Daycare   @relation(fields: [daycareId], references: [id])
  daycareId     String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model VerificationToken {
  id      String   @id @default(cuid())
  email   String
  token   String   @unique
  expires DateTime

  @@unique([email, token])
}

model Child {
  id                     String      @id @default(cuid())
  name                   String
  dateOfBirth            DateTime
  gender                 String?
  startDate              DateTime
  status                 ChildStatus @default(Active)
  program                String
  programType            String
  motherName             String
  motherEmail            String?
  fatherName             String
  fatherEmail            String?
  homePhone              String?
  mobilePhone            String
  address                String
  emergencyName          String
  emergencyPhone         String
  vaccination            String?
  allergies              String?
  notes                  String?
  photoUrl               String?
  photoHint              String?
  daycare                Daycare     @relation(fields: [daycareId], references: [id])
  daycareId              String
  createdAt              DateTime    @default(now())
  updatedAt              DateTime    @updatedAt
}

enum ChildStatus {
  Active
  Waitlisted
  Inactive
}

model Staff {
  id             String   @id @default(cuid())
  name           String
  role           String
  startDate      DateTime
  status         String
  phone          String
  address        String
  emergencyName  String
  emergencyPhone String
  payType        String
  payRate        Float
  certifications String?
  notes          String?
  photoUrl       String?
  photoHint      String?
  daycare        Daycare  @relation(fields: [daycareId], references: [id])
  daycareId      String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
